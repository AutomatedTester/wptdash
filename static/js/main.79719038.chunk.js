(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(23)},17:function(e,t,a){},21:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(10),l=a.n(s),c=(a(17),a(8)),o=a(5),u=a(4),i=a(6),p=a(2),h=a(3),f=a(7),d=a(1),m=a.n(d),v=(a(21),m.a.mark(j)),b=m.a.mark(E),y="https://queue.taskcluster.net/v1/task",k="https://staging.wpt.fyi",g=new Set(["PASS","OK"]);function j(e){var t;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=e.length;case 1:if(!(t>0)){a.next=7;break}return t--,a.next=5,e[t];case 5:a.next=1;break;case 7:case"end":return a.stop()}},v,this)}function w(e,t){return e===t||!(!Array.isArray(e)||!Array.isArray(t))&&(e.length===t.length&&e.every(function(e,a){return e===t[a]}))}function O(e,t){if(e.size!==t.size)return!1;var a=!0,n=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;if(!t.has(c))return!1}}catch(o){n=!0,r=o}finally{try{a||null==l.return||l.return()}finally{if(n)throw r}}return!0}function E(e,t){var a,n,r;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(a=Array.from(e.keys())).sort(),n=0;case 3:if(!(n<a.length)){t.next=10;break}return r=a[n],t.next=7,[r,e.get(r)];case 7:n++,t.next=3;break;case 10:case"end":return t.stop()}},b,this)}function x(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new URL("".concat(k,"/").concat(e)),n=[["label","master"],["product","chrome[experimental]"],["product","firefox[experimental]"],["product","safari[experimental]"]],r=0;r<n.length;r++){var s=n[r],l=Object(f.a)(s,2),c=l[0],o=l[1];a.searchParams.append(c,o)}for(var u=Object.keys(t),i=function(){var e=u[p],n=t[e];Array.isArray(n)?n.forEach(function(t){return a.searchParams.append(e,t)}):a.searchParams.append(e,n)},p=0;p<u.length;p++)i();return a}var C=new(function(){function e(){Object(p.a)(this,e),this.url=new URL(window.location),this.params=this.url.searchParams}return Object(h.a)(e,[{key:"_update",value:function(){window.history.replaceState({},document.title,this.url.href)}},{key:"get",value:function(e){return this.params.get(e)}},{key:"has",value:function(e){return this.params.has(e)}},{key:"set",value:function(e,t){this.params.set(e,t),this._update()}},{key:"delete",value:function(e){this.params.delete(e),this._update()}},{key:"append",value:function(e,t){this.params.append(e,t),this._update()}}]),e}()),S=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).onComponentChange=function(e){var t=e.toLowerCase(),n=new Set(a.state.bugComponentsMap.get(t));C.set("bugComponent",e),C.delete("paths"),a.setState({currentBugComponent:t,selectedPaths:n})},a.onPathsChange=function(e){var t=Array.from(e);t.sort(),w(t,a.state.bugComponentsMap.get(a.state.currentBugComponent))?C.delete("paths"):C.set("paths",t.join(",")),a.setState({selectedPaths:e})},a.state={bugComponents:[],bugComponentsMap:new Map,currentBugComponent:null,selectedPaths:new Set,wptRuns:null,geckoMetadata:{},geckoMetadataForPaths:{}},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"loadTaskClusterData",value:function(){var e=Object(c.a)(m.a.mark(function e(t,a){var n,r,s,l,c,o,u,i,p,h,f,d,v,b,k,g;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://index.taskcluster.net/v1/task","/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,s=r.taskId,e.next=9,fetch("".concat(y,"/").concat(s,"/status"));case 9:return l=e.sent,e.next=12,l.json();case 12:c=e.sent,u=!0,i=!1,p=void 0,e.prev=16,h=j(c.status.runs)[Symbol.iterator]();case 18:if(u=(f=h.next()).done){e.next=26;break}if("completed"!==(d=f.value).state){e.next=23;break}return o=d.runId,e.abrupt("break",26);case 23:u=!0,e.next=18;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(16),i=!0,p=e.t0;case 32:e.prev=32,e.prev=33,u||null==h.return||h.return();case 35:if(e.prev=35,!i){e.next=38;break}throw p;case 38:return e.finish(35);case 39:return e.finish(32);case 40:return e.next=42,fetch("".concat(y,"/").concat(s,"/runs/").concat(o,"/artifacts"));case 42:return v=e.sent,e.next=45,v.json();case 45:return b=e.sent,k=b.artifacts.find(function(e){return e.name.endsWith(a)}),e.next=49,fetch("".concat(y,"/").concat(s,"/runs/").concat(o,"/artifacts/").concat(k.name));case 49:return g=e.sent,e.abrupt("return",g.json());case 51:case"end":return e.stop()}},e,this,[[16,28,32,40],[33,,35,39]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"loadBugComponentData",value:function(){var e=Object(c.a)(m.a.mark(function e(){var t,a,n,r,s,l,c,o,u;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadTaskClusterData("gecko.v2.mozilla-central.latest.source.source-bugzilla-info","components-normalized.json");case 2:t=e.sent,a=this.processComponentData(t),n=Object(f.a)(a,2),r=n[0],s=n[1],(r=Array.from(r).sort()).push("Any"),this.setState({bugComponentsMap:s,bugComponents:r}),!(l=this.state.currentBugComponent)&&C.has("bugComponent")&&(c=C.get("bugComponent"),s.has(c)&&(l=c)),l||(l=r[0].toLowerCase()),o=new Set(s.get(l)),C.has("paths")&&(u=new Set(C.get("paths").split(",")),o=new Set(Array.from(o).filter(function(e){return u.has(e)}))),this.setState({selectedPaths:o,currentBugComponent:l});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadWptRunData",value:function(){var e=Object(c.a)(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=x("api/runs",{aligned:""}),e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,this.setState({wptRuns:n});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadGeckoMetadata",value:function(){var e=Object(c.a)(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://queue.taskcluster.net/v1/task/Ik2tnR1KQzi26GfvTQ2WHw/runs/0/artifacts/public/summary.json",{redirect:"follow"});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,this.setState({geckoMetadata:a});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(c.a)(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.loadBugComponentData(),a=this.loadWptRunData(),n=this.loadGeckoMetadata(),e.next=5,Promise.all([t,a,n]);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"filterGeckoMetadata",value:function(){if(this.state.selectedPaths.size&&Object.keys(this.state.geckoMetadata).length){var e=d(Array.from(this.state.selectedPaths).map(function(e){return e.slice(1)})),t=[],a=!0,n=!1,r=void 0;try{for(var s,l=this.state.bugComponentsMap.values()[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;!this.state.selectedPaths.has(c)&&e.test(c.slice(1))&&t.push(c)}}catch(m){n=!0,r=m}finally{try{a||null==l.return||l.return()}finally{if(n)throw r}}for(var o=d(t),u={},i=this.state.geckoMetadata,p=Object.keys(i),h=0;h<p.length;h++){var f=p[h];!e.test(f)||null!==o&&o.test(f)||(u[f]=i[f])}this.setState({pathMetadata:u})}function d(e){return e.length?new RegExp("^(?:".concat(e.join("|"),")(?:$|/)")):null}}},{key:"processComponentData",value:function(e){var t=e.components,a=e.paths,n=new Map,r=new Map,s="testing/web-platform/tests",l=[[s,a.testing["web-platform"].tests]],c=/(.*)\/[^\/]*$/,o=[];for(r.set("any",[]);l.length;)for(var u=l.pop(),i=Object(f.a)(u,2),p=i[0],h=i[1],d=!1,m=Object.keys(h),v=0;v<m.length;v++){var b=m[v],y=h[b];if("object"===typeof y){var k="".concat(p,"/").concat(b);l.push([k,y])}else{if(d||p===s)continue;for(var g=p,j=t[y].join("::"),w=j.toLowerCase();g!==s;){if(n.has(g)&&n.get(g)===w){d=!0;break}g=c.exec(g)[1]}if(!d){n.set(p,w),r.has(w)||(r.set(w,[]),o.push(j));var O=p.slice(s.length);r.get(w).push(O),r.get("any").push(O),d=!0}}}return[o,r]}},{key:"componentDidUpdate",value:function(e,t){t.geckoMetadata===this.state.geckoMetadata&&w(t.selectedPaths,this.state.selectedPaths)||this.filterGeckoMetadata()}},{key:"render",value:function(){var e=this.state.bugComponentsMap.get(this.state.currentBugComponent);return r.a.createElement("div",{id:"app"},r.a.createElement("header",null,r.a.createElement("h1",null,"wpt interop dashboard")),r.a.createElement("section",{id:"selector"},r.a.createElement(M,{runs:this.state.wptRuns}),r.a.createElement(_,{onComponentChange:this.onComponentChange,components:this.state.bugComponents,value:this.state.currentBugComponent}),r.a.createElement(P,{paths:e,selectedPaths:this.state.selectedPaths,onChange:this.onPathsChange})),r.a.createElement("section",{id:"details"},r.a.createElement(W,null,r.a.createElement(I,{label:"Firefox-only Failures",failsIn:["firefox"],passesIn:["safari","chrome"],runs:this.state.wptRuns,paths:Array.from(this.state.selectedPaths),geckoMetadata:this.state.pathMetadata},r.a.createElement("h2",null,"Firefox-only Failures"),r.a.createElement("p",null,"Tests that pass in Chrome and Safari but fail in Firefox.")),r.a.createElement(I,{label:"All Firefox Failures",failsIn:["firefox"],passesIn:[],runs:this.state.wptRuns,paths:Array.from(this.state.selectedPaths),geckoMetadata:this.state.pathMetadata},r.a.createElement("h2",null,"All Firefox Failures"),r.a.createElement("p",null,"Tests that fail in Firefox")),r.a.createElement(F,{label:"Gecko Data",data:this.state.pathMetadata,paths:Array.from(this.state.selectedPaths)},r.a.createElement("h2",null,"Gecko metadata"),r.a.createElement("p",null,"Gecko metadata in ",r.a.createElement("code",null,"testing/web-platform/meta")," taken from latest mozilla-central."),r.a.createElement("p",null,"Note: this data is currently not kept up to date")))))}}]),t}(n.Component),M=function(e){function t(){return Object(p.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){if(!this.props.runs)return null;var e=this.props.runs[0].revision,t=x("",{sha:this.props.runs[0].full_revision_hash});return r.a.createElement("dl",null,r.a.createElement("dt",null,"wpt SHA1:"),r.a.createElement("dd",null,r.a.createElement("a",{href:t},e)))}}]),t}(n.Component),_=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){a.props.onComponentChange(e.target.value)},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.components.map(function(e){return r.a.createElement("option",{value:e.toLowerCase(),key:e.toLowerCase()},e)});return this.props.value?r.a.createElement("section",null,r.a.createElement("label",null,"Bug Component: "),r.a.createElement("select",{onChange:this.handleChange,value:this.props.value},e)):null}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).onCheckboxChange=function(e,t){var n=new Set(a.state.paths);t?n.add(e):n.delete(e),a.setState({paths:n})},a.onUpdateClick=function(){a.props.onChange(a.state.paths)},a.state={paths:new Set(a.props.paths)},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e){e.selectedPaths!==this.props.selectedPaths&&this.setState({paths:new Set(this.props.selectedPaths)})}},{key:"render",value:function(){var e=this;if(!this.props.paths)return null;var t=this.props.paths.sort().map(function(t){return r.a.createElement("li",{key:t},r.a.createElement(A,{checked:e.props.selectedPaths.has(t),value:t,onCheckboxChange:e.onCheckboxChange}),t)});return r.a.createElement("section",null,r.a.createElement("h2",null,"Test Paths"),r.a.createElement("button",{onClick:this.onUpdateClick,disabled:O(this.state.paths,this.props.selectedPaths)},"Update"),r.a.createElement("ul",{id:"test-paths"},t))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState({checked:!!e.target.checked}),a.props.onCheckboxChange(a.props.value,e.target.checked)},a.state={checked:a.props.checked},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("input",{name:this.props.path,type:"checkbox",checked:this.state.checked,onChange:this.handleChange})}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={loaded:!1,results:[]},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"buildQuery",value:function(){var e={run_ids:this.props.runs.map(function(e){return e.id}),query:{and:[]}},t=e.query.and,a=!0,n=!1,r=void 0;try{for(var s,l=this.props.failsIn[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value,o=!0,u=!1,i=void 0;try{for(var p,h=g[Symbol.iterator]();!(o=(p=h.next()).done);o=!0){var f=p.value;t.push({not:{browser_name:c,status:f}})}}catch(_){u=!0,i=_}finally{try{o||null==h.return||h.return()}finally{if(u)throw i}}}}catch(_){n=!0,r=_}finally{try{a||null==l.return||l.return()}finally{if(n)throw r}}var d=!0,m=!1,v=void 0;try{for(var b,y=this.props.passesIn[Symbol.iterator]();!(d=(b=y.next()).done);d=!0){var k=b.value,j=void 0;if(g.size>1){var w={or:[]};t.push(w),j=w.or}else j=t;var O=!0,E=!1,x=void 0;try{for(var C,S=g[Symbol.iterator]();!(O=(C=S.next()).done);O=!0){var M=C.value;j.push({browser_name:k,status:M})}}catch(_){E=!0,x=_}finally{try{O||null==S.return||S.return()}finally{if(E)throw x}}}}catch(_){m=!0,v=_}finally{try{d||null==y.return||y.return()}finally{if(m)throw v}}return this.props.paths.length>1?t.push({or:this.props.paths.map(function(e){return{pattern:e+"/"}})}):t.push({pattern:this.props.paths[0]}),e}},{key:"fetchResults",value:function(){var e=Object(c.a)(m.a.mark(function e(){var t,a,n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.buildQuery(),e.next=3,fetch(x("api/search",{}),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,r=new RegExp(this.props.paths.map(function(e){return"^".concat(e,"/")}).join("|")),n.results=n.results.filter(function(e){return r.test(e.test)}),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getMetadata",value:function(e){var t=new Map,a=e.split("/"),n=a[a.length-1];a=a.slice(1,a.length-1);var r="";function s(e){for(var a=Object.entries(e),n=0;n<a.length;n++){var r=a[n],s=Object(f.a)(r,2),l=s[0],c=s[1];"_"!==l[0]&&t.set(l,c)}}var l=!0,c=!1,o=void 0;try{for(var u,i=a[Symbol.iterator]();!(l=(u=i.next()).done);l=!0){var p=u.value;r.length&&(r+="/"),r+=p;var h=this.props.geckoMetadata[r];h&&s(h)}}catch(w){c=!0,o=w}finally{try{l||null==i.return||i.return()}finally{if(c)throw o}}var d=this.props.geckoMetadata[r];if(d&&d._tests&&d._tests[n]){var m=d._tests[n];if(s(m),m._subtests){t._subtests=new Map;for(var v=Object.entries(m._subtests),b=0;b<v.length;b++){var y=v[b],k=Object(f.a)(y,2),g=k[0],j=k[1];t._subtests.set(g,new Map(Object.entries(j)))}}}return t}},{key:"render",value:function(){var e=this;if(!this.props.runs||!this.state.loaded)return r.a.createElement("div",null,this.props.children,r.a.createElement("p",null,"Loading\u2026"));if(null===this.state.results.results)return r.a.createElement("div",null,this.props.children,r.a.createElement("p",null,"Load failed"));if(!this.state.results.results.length)return r.a.createElement("div",null,this.props.children,r.a.createElement("p",null,"No results"));var t=this.state.results.results.map(function(t){return r.a.createElement(R,{failsIn:e.props.failsIn,passesIn:e.props.passesIn,runs:e.props.runs,result:t,key:t.test,geckoMetadata:e.getMetadata(t.test)})});return t.sort(function(e,t){return e.key>t.key?1:e.key===t.key?0:-1}),r.a.createElement("div",null,this.props.children,r.a.createElement("p",null,this.state.results.results.length," top-level tests with \xa0",this.state.results.results.map(function(e){return e.legacy_status[0].total}).reduce(function(e,t){return e+t},0)," subtests"),r.a.createElement("ul",null,t))}},{key:"componentDidMount",value:function(){var e=Object(c.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchIfPossible({});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(c.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchIfPossible(t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchIfPossible",value:function(){var e=Object(c.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.props.runs){e.next=2;break}return e.abrupt("return");case 2:if(this.props.paths){e.next=4;break}return e.abrupt("return");case 4:if(!(this.state.loaded&&w(this.props.paths,t.paths)&&w(this.props.failsIn,t.failsIn)&&w(this.props.passesIn,t.passesIn))){e.next=6;break}return e.abrupt("return");case 6:if(this.props.paths.length){e.next=9;break}return this.setState({results:{results:[]},loaded:!0}),e.abrupt("return");case 9:return e.next=11,this.fetchResults();case 11:a=e.sent,this.setState({results:a,loaded:!0});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}(n.Component),D=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(){a.setState({showDetails:!a.state.showDetails})},a.state={showDetails:!1},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("li",{className:"tree-row"+(this.state.showDetails?" tree-row-expanded":"")},r.a.createElement("span",{onClick:this.handleClick},this.state.showDetails?"\u25bc ":"\u25b6 ",this.props.rowTitle),this.props.rowExtra,this.state.showDetails?r.a.createElement("div",{className:"tree-row"},this.props.children):"")}}]),t}(n.Component),R=function(e){function t(){return Object(p.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e="".concat(this.props.result.test," [").concat(this.props.result.legacy_status[0].total," subtests]");return r.a.createElement(D,{rowTitle:r.a.createElement("code",null,e),rowExtra:null},r.a.createElement(N,{runs:this.props.runs,test:this.props.result.test,passesIn:this.props.passesIn,failsIn:this.props.failsIn,geckoMetadata:this.props.geckoMetadata}))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={loaded:!1,results:null},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"processResultData",value:function(e){var t=this,a=new Map,n=!0,r=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var o=l.value,u=Object(f.a)(o,2),i=u[0],p=u[1];a.has(null)||a.set(null,new Map),a.get(null).set(i,{status:p.status,message:p.message});var h=!0,d=!1,m=void 0;try{for(var v,b=p.subtests[Symbol.iterator]();!(h=(v=b.next()).done);h=!0){var y=v.value;a.has(y.name)||a.set(y.name,new Map),a.get(y.name).set(i,{status:y.status,message:y.message})}}catch(G){d=!0,m=G}finally{try{h||null==b.return||b.return()}finally{if(d)throw m}}}}catch(G){r=!0,s=G}finally{try{n||null==c.return||c.return()}finally{if(r)throw s}}var k=!0,j=!1,w=void 0;try{for(var O,E=a.values()[Symbol.iterator]();!(k=(O=E.next()).done);k=!0){var x=O.value,C=!0,S=!1,M=void 0;try{for(var _,P=e.keys()[Symbol.iterator]();!(C=(_=P.next()).done);C=!0){var A=_.value;x.has(A)||x.set(A,{status:"MISSING",message:null})}}catch(G){S=!0,M=G}finally{try{C||null==P.return||P.return()}finally{if(S)throw M}}}}catch(G){j=!0,w=G}finally{try{k||null==E.return||E.return()}finally{if(j)throw w}}var I=new Map,D=!0,R=!1,N=void 0;try{for(var T,L=function(){var e=T.value,a=(B=Object(f.a)(e,2))[0],n=B[1];t.props.passesIn.every(function(e){return g.has(n.get(e).status)})&&t.props.failsIn.every(function(e){return!g.has(n.get(e).status)})&&I.set(a,n)},z=a[Symbol.iterator]();!(D=(T=z.next()).done);D=!0){var B;L()}}catch(G){R=!0,N=G}finally{try{D||null==z.return||z.return()}finally{if(R)throw N}}var F=[];return I.has(null)&&(F.push([null,I.get(null)]),I.delete(null)),F.concat(Array.from(I))}},{key:"componentDidMount",value:function(){var e=Object(c.a)(m.a.mark(function e(){var t,a,n,r,s,l,c,o,u,i,p,h,d,v,b,y,k,g,j,w,O;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=new Map,a=!0,n=!1,r=void 0,e.prev=4,s=this.props.runs[Symbol.iterator]();!(a=(l=s.next()).done);a=!0)c=l.value,o=c.browser_name,u=c.results_url,(i=u.split("-")).pop(),p="".concat(i.join("-")).concat(this.props.test),t.set(o,fetch(p).then(function(e){return e.json()}));e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),n=!0,r=e.t0;case 12:e.prev=12,e.prev=13,a||null==s.return||s.return();case 15:if(e.prev=15,!n){e.next=18;break}throw r;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return e.next=22,Promise.all(Array.from(t.values()));case 22:h=!0,d=!1,v=void 0,e.prev=25,b=t[Symbol.iterator]();case 27:if(h=(y=b.next()).done){e.next=41;break}return k=y.value,g=Object(f.a)(k,2),j=g[0],w=g[1],e.t1=t,e.t2=j,e.next=36,w;case 36:e.t3=e.sent,e.t1.set.call(e.t1,e.t2,e.t3);case 38:h=!0,e.next=27;break;case 41:e.next=47;break;case 43:e.prev=43,e.t4=e.catch(25),d=!0,v=e.t4;case 47:e.prev=47,e.prev=48,h||null==b.return||b.return();case 50:if(e.prev=50,!d){e.next=53;break}throw v;case 53:return e.finish(50);case 54:return e.finish(47);case 55:O=this.processResultData(t),this.setState({results:O,loaded:!0});case 57:case"end":return e.stop()}},e,this,[[4,8,12,20],[13,,15,19],[25,43,47,55],[48,,50,54]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(!this.state.loaded)return r.a.createElement("p",null,"Loading");var t=this.props.runs.map(function(e){return r.a.createElement("th",{key:e.browser_name},e.browser_name)});t.push(r.a.createElement("th",{key:"metadata"}));var a=this.props.geckoMetadata.get("_subtests")||new Map,n=this.state.results.map(function(t){var n=Object(f.a)(t,2),s=n[0],l=n[1];return r.a.createElement(z,{key:s,runs:e.props.runs,subtest:s,results:l,geckoMetadata:a.get(s)})});return r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"http://w3c-test.org".concat(this.props.test)},"Live test")),r.a.createElement("li",null,r.a.createElement("a",{href:x("results/".concat(this.props.test))},"wpt.fyi")),r.a.createElement("li",null,r.a.createElement("a",{href:"http://searchfox.org/mozilla-central/source/testing/web-platform/meta".concat(this.props.test,".ini")},"Gecko Metadata"))),r.a.createElement(T,{test:this.props.test,data:this.props.geckoMetadata}),r.a.createElement("section",null,r.a.createElement("h3",null,"Results"),r.a.createElement("table",{className:"results"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),t)),r.a.createElement("tbody",null,n))))}}]),t}(n.Component),T=function(e){function t(){return Object(p.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e,t=this,a=function(e){return r.a.createElement(U,{value:e})};this.props.data?e=[{name:"disabled",render:a},{name:"bug",render:a},{name:"crash",title:"Crashes",render:a}].map(function(e){return t.props.data.has(e.name)?r.a.createElement(L,{key:e.name,title:e.title?e.title:(a=e.name,a&&a[0].toUpperCase()+a.slice(1)),values:t.props.data.get(e.name),render:e.render}):null;var a}).filter(function(e){return null!==e}):e=[];return 0===e.length?null:r.a.createElement("section",null,r.a.createElement("h3",null,"Gecko Metadata"),r.a.createElement("ul",null,e))}}]),t}(n.Component),L=function(e){function t(){return Object(p.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.props.values?1===this.props.values.length&&null===this.props.values[0][0]?r.a.createElement("li",null,this.props.title,": ",this.props.render(this.props.values[0])):r.a.createElement(G,{title:this.props.title,values:this.props.values,render:this.props.render}):null}}]),t}(n.Component),z=function(e){function t(){return Object(p.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.runs.map(function(t){var a=e.props.results.get(t.browser_name);return r.a.createElement(B,{result:a,key:t.browser_name})});return t.push(r.a.createElement("td",{key:"metadata"},r.a.createElement(T,{data:this.props.geckoMetadata}))),r.a.createElement("tr",null,r.a.createElement("th",null,this.props.subtest?this.props.subtest:"<parent>"),t)}}]),t}(n.Component),B=function(e){function t(){return Object(p.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("td",{className:"result result-".concat(this.props.result.status.toLowerCase()),title:this.props.result.message},this.props.result.status)}}]),t}(n.Component),F=function(e){function t(){return Object(p.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"groupData",value:function(){for(var e=new Map,t=new Map,a=new Map,n=Object.entries(this.props.data),r=0;r<n.length;r++){var s=n[r],l=Object(f.a)(s,2),c=l[0],o=l[1];if(o.disabled&&e.set(c,o.disabled),o["lsan-allowed"]&&t.set(c,o["lsan-allowed"]),o.expected_CRASH&&a.set(c,o.expected_CRASH.map(function(e){return[e,null]})),o._tests)for(var u=Object.entries(o._tests),i=0;i<u.length;i++){var p=u[i],h=Object(f.a)(p,2),d=h[0],m=h[1],v="".concat(c,"/").concat(d);if(m.disabled&&e.set(v,m.disabled),m.expected_CRASH&&a.set(v,m.expected_CRASH.map(function(e){return[e,null]})),m._subtests)for(var b=Object.entries(m._subtests),y=0;y<b.length;y++){var k=b[y],g=Object(f.a)(k,2),j=g[0],w=g[1],O="".concat(c,"/").concat(d," | ").concat(j);w.disabled&&e.set(O,w.disabled),w.expected_CRASH&&a.set(O,w.expected_CRASH.map(function(e){return[e,null]}))}}}return{disabled:e,lsan:t,crashes:a}}},{key:"render",value:function(){var e;if(null!==this.props.data){e=[];var t=this.groupData();if(t.crashes){var a=[],n=!0,s=!1,l=void 0;try{for(var c,o=E(t.crashes)[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var u=c.value,i=Object(f.a)(u,2),p=i[0],h=i[1];a.push(r.a.createElement(G,{key:p,title:p,values:h,render:function(e){return null}}))}}catch(N){s=!0,l=N}finally{try{n||null==o.return||o.return()}finally{if(s)throw l}}a.length&&e.push(r.a.createElement("section",{key:"crashes"},r.a.createElement("h2",null,"Crashes"),r.a.createElement("p",null,a.length," tests crash in some configurations"),r.a.createElement("ul",null,a)))}if(t.disabled){var d=[],m=!0,v=!1,b=void 0;try{for(var y,k=E(t.disabled)[Symbol.iterator]();!(m=(y=k.next()).done);m=!0){var g=y.value,j=Object(f.a)(g,2),w=j[0],O=j[1];d.push(r.a.createElement(G,{key:w,title:w,values:O,render:function(e){return r.a.createElement(U,{value:e})}}))}}catch(N){v=!0,b=N}finally{try{m||null==k.return||k.return()}finally{if(v)throw b}}d.length&&e.push(r.a.createElement("section",{key:"disabled"},r.a.createElement("h2",null,"Disabled"),r.a.createElement("p",null,d.length," tests are disabled in some configurations"),r.a.createElement("ul",null,d)))}if(t.lsan){var x=[],C=!0,S=!1,M=void 0;try{for(var _,P=E(t.lsan)[Symbol.iterator]();!(C=(_=P.next()).done);C=!0){var A=_.value,I=Object(f.a)(A,2),D=I[0],R=I[1];x.push(r.a.createElement(G,{key:D,title:D,values:R,render:function(e){return r.a.createElement(H,{value:e})}}))}}catch(N){S=!0,M=N}finally{try{C||null==P.return||P.return()}finally{if(S)throw M}}x.length&&e.push(r.a.createElement("section",{key:"lsan"},r.a.createElement("h2",null,"LSAN Failures"),r.a.createElement("p",null,x.length," directories have LSAN failures"),r.a.createElement("ul",null,x)))}return r.a.createElement("section",null,this.props.children,e.length?e:r.a.createElement("p",null,"No metadata available"))}return e=r.a.createElement("p",null,"Loading"),r.a.createElement("section",null,r.a.createElement("h2",null,"Gecko metadata"),r.a.createElement("p",null,"None"))}}]),t}(n.Component),G=function(e){function t(){return Object(p.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var s,l=this.props.values[Symbol.iterator]();!(t=(s=l.next()).done);t=!0){var c=s.value,o=Object(f.a)(c,2),u=o[0],i=o[1],p=u?"if ".concat(u).concat(i?": ":" "):"";e.push(r.a.createElement("li",{key:u||"None"},r.a.createElement("code",null,p),i?this.props.render(i):null))}}catch(d){a=!0,n=d}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}var h=null;return e.length&&(h=r.a.createElement("ul",{className:"tree-row"},e)),r.a.createElement(D,{rowTitle:this.props.title,rowExtra:null},h)}}]),t}(n.Component),U=function(e){function t(){return Object(p.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){for(var e=[/https?:\/\/bugzilla\.mozilla\.org\/show_bug\.cgi\?id=(\d+)/,/(?:bug\s+)?(\d+)/i],t=0;t<e.length;t++){var a=e[t].exec(this.props.value);if(null!==a)return r.a.createElement("a",{href:"https://bugzilla.mozilla.org/show_bug.cgi?id=".concat(a[1])},"Bug ",a[1])}return this.props.value}}]),t}(n.Component),H=function(e){function t(){return Object(p.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){if(Array.isArray(this.props.value)){var e=this.props.value.map(function(e){return r.a.createElement("li",{key:e},r.a.createElement("code",null,e))});return r.a.createElement("ul",null,e)}return this.props.value}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleClickTab=function(e){a.setState({activeTab:e}),C.set("tab",e)},a.state={activeTab:C.get("tab")||a.props.children[0].props.label},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.children.map(function(t){var a=t.props.label;return r.a.createElement(q,{active:e.state.activeTab===a,label:a,key:a,onClick:e.handleClickTab})}),a=this.props.children.find(function(t){return t.props.label===e.state.activeTab});return r.a.createElement("div",{className:"tab-view"},r.a.createElement("ol",{className:"tab-strip"},t),r.a.createElement("div",{className:"tab-content"},a))}}]),t}(n.Component),q=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(){a.props.onClick(a.props.label)},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("li",{className:"tab-label "+(this.props.active?"tab-active":""),onClick:this.onClick},this.props.label)}}]),t}(n.Component),Q=S;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,2,1]]]);
//# sourceMappingURL=main.79719038.chunk.js.map