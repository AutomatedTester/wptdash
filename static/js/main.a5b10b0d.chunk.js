(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(23)},17:function(e,t,a){},21:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(10),l=a.n(s),o=(a(17),a(8)),c=a(5),u=a(4),i=a(6),p=a(2),h=a(3),f=a(7),d=a(1),m=a.n(d),v=(a(21),m.a.mark(g)),b="https://queue.taskcluster.net/v1/task",y="https://staging.wpt.fyi",k=new Set(["PASS","OK"]);function g(e){var t;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=e.length;case 1:if(!(t>0)){a.next=7;break}return t--,a.next=5,e[t];case 5:a.next=1;break;case 7:case"end":return a.stop()}},v,this)}function j(e,t){return e===t||!(!Array.isArray(e)||!Array.isArray(t))&&(e.length===t.length&&e.every(function(e,a){return e===t[a]}))}function w(e,t){if(e.size!==t.size)return!1;var a=!0,n=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var o=s.value;if(!t.has(o))return!1}}catch(c){n=!0,r=c}finally{try{a||null==l.return||l.return()}finally{if(n)throw r}}return!0}function O(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new URL("".concat(y,"/").concat(e)),n=[["label","master"],["product","chrome[experimental]"],["product","firefox[experimental]"],["product","safari[experimental]"]],r=0;r<n.length;r++){var s=n[r],l=Object(f.a)(s,2),o=l[0],c=l[1];a.searchParams.append(o,c)}for(var u=Object.keys(t),i=function(){var e=u[p],n=t[e];Array.isArray(n)?n.forEach(function(t){return a.searchParams.append(e,t)}):a.searchParams.append(e,n)},p=0;p<u.length;p++)i();return a}var E=new(function(){function e(){Object(p.a)(this,e),this.url=new URL(window.location),this.params=this.url.searchParams}return Object(h.a)(e,[{key:"_update",value:function(){window.history.replaceState({},document.title,this.url.href)}},{key:"get",value:function(e){return this.params.get(e)}},{key:"has",value:function(e){return this.params.has(e)}},{key:"set",value:function(e,t){this.params.set(e,t),this._update()}},{key:"delete",value:function(e){this.params.delete(e),this._update()}},{key:"append",value:function(e,t){this.params.append(e,t),this._update()}}]),e}()),x=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onComponentChange=function(e){var t=e.toLowerCase(),n=new Set(a.state.bugComponentsMap.get(t));E.set("bugComponent",e),E.delete("paths"),a.setState({currentBugComponent:t,selectedPaths:n})},a.onPathsChange=function(e){var t=Array.from(e);t.sort(),j(t,a.state.bugComponentsMap.get(a.state.currentBugComponent))?E.delete("paths"):E.set("paths",t.join(",")),a.setState({selectedPaths:e})},a.state={bugComponents:[],bugComponentsMap:new Map,currentBugComponent:null,selectedPaths:new Set,wptRuns:null,geckoMetadata:{}},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"loadTaskClusterData",value:function(){var e=Object(o.a)(m.a.mark(function e(t,a){var n,r,s,l,o,c,u,i,p,h,f,d,v,y,k,j;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://index.taskcluster.net/v1/task","/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,s=r.taskId,e.next=9,fetch("".concat(b,"/").concat(s,"/status"));case 9:return l=e.sent,e.next=12,l.json();case 12:o=e.sent,u=!0,i=!1,p=void 0,e.prev=16,h=g(o.status.runs)[Symbol.iterator]();case 18:if(u=(f=h.next()).done){e.next=26;break}if("completed"!==(d=f.value).state){e.next=23;break}return c=d.runId,e.abrupt("break",26);case 23:u=!0,e.next=18;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(16),i=!0,p=e.t0;case 32:e.prev=32,e.prev=33,u||null==h.return||h.return();case 35:if(e.prev=35,!i){e.next=38;break}throw p;case 38:return e.finish(35);case 39:return e.finish(32);case 40:return e.next=42,fetch("".concat(b,"/").concat(s,"/runs/").concat(c,"/artifacts"));case 42:return v=e.sent,e.next=45,v.json();case 45:return y=e.sent,k=y.artifacts.find(function(e){return e.name.endsWith(a)}),e.next=49,fetch("".concat(b,"/").concat(s,"/runs/").concat(c,"/artifacts/").concat(k.name));case 49:return j=e.sent,e.abrupt("return",j.json());case 51:case"end":return e.stop()}},e,this,[[16,28,32,40],[33,,35,39]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"loadBugComponentData",value:function(){var e=Object(o.a)(m.a.mark(function e(){var t,a,n,r,s,l,o,c,u;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadTaskClusterData("gecko.v2.mozilla-central.latest.source.source-bugzilla-info","components-normalized.json");case 2:t=e.sent,a=this.processComponentData(t),n=Object(f.a)(a,2),r=n[0],s=n[1],(r=Array.from(r).sort()).push("Any"),this.setState({bugComponentsMap:s,bugComponents:r}),!(l=this.state.currentBugComponent)&&E.has("bugComponent")&&(o=E.get("bugComponent"),s.has(o)&&(l=o)),l||(l=r[0].toLowerCase()),c=new Set(s.get(l)),E.has("paths")&&(u=new Set(E.get("paths").split(",")),c=new Set(Array.from(c).filter(function(e){return u.has(e)}))),this.setState({selectedPaths:c,currentBugComponent:l});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadWptRunData",value:function(){var e=Object(o.a)(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=O("api/runs",{aligned:""}),e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,this.setState({wptRuns:n});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadGeckoMetadata",value:function(){var e=Object(o.a)(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://queue.taskcluster.net/v1/task/eaGx0TqWSEiGoSBS_1YDcw/runs/0/artifacts/public/summary.json",{redirect:"follow"});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,this.setState({geckoMetadata:a});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(o.a)(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.loadBugComponentData(),a=this.loadWptRunData(),n=this.loadGeckoMetadata(),e.next=5,Promise.all([t,a,n]);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"filterGeckoMetadata",value:function(){if(!this.state.selectedPaths.size||!Object.keys(this.state.geckoMetadata).length)return null;function e(e){return e.length?new RegExp("^(?:".concat(e.join("|"),")(?:$|/)")):null}var t=e(Array.from(this.state.selectedPaths).map(function(e){return e.slice(1)})),a=[],n=!0,r=!1,s=void 0;try{for(var l,o=this.state.bugComponentsMap.values()[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var c=l.value;!this.state.selectedPaths.has(c)&&t.test(c.slice(1))&&a.push(c)}}catch(m){r=!0,s=m}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}for(var u=e(a),i={},p=this.state.geckoMetadata,h=Object.keys(p),f=0;f<h.length;f++){var d=h[f];!t.test(d)||null!==u&&u.test(d)||(i[d]=p[d])}return i}},{key:"processComponentData",value:function(e){var t=e.components,a=e.paths,n=new Map,r=new Map,s="testing/web-platform/tests",l=[[s,a.testing["web-platform"].tests]],o=/(.*)\/[^\/]*$/,c=[];for(r.set("any",[]);l.length;)for(var u=l.pop(),i=Object(f.a)(u,2),p=i[0],h=i[1],d=!1,m=Object.keys(h),v=0;v<m.length;v++){var b=m[v],y=h[b];if("object"===typeof y){var k="".concat(p,"/").concat(b);l.push([k,y])}else{if(d||p===s)continue;for(var g=p,j=t[y].join("::"),w=j.toLowerCase();g!==s;){if(n.has(g)&&n.get(g)===w){d=!0;break}g=o.exec(g)[1]}if(!d){n.set(p,w),r.has(w)||(r.set(w,[]),c.push(j));var O=p.slice(s.length);r.get(w).push(O),r.get("any").push(O),d=!0}}}return[c,r]}},{key:"render",value:function(){var e=this.state.bugComponentsMap.get(this.state.currentBugComponent);return r.a.createElement("div",{id:"app"},r.a.createElement("header",null,r.a.createElement("h1",null,"wpt interop dashboard")),r.a.createElement("section",{id:"selector"},r.a.createElement(C,{runs:this.state.wptRuns}),r.a.createElement(S,{onComponentChange:this.onComponentChange,components:this.state.bugComponents,value:this.state.currentBugComponent}),r.a.createElement(A,{paths:e,selectedPaths:this.state.selectedPaths,onChange:this.onPathsChange})),r.a.createElement("section",{id:"details"},r.a.createElement(z,null,r.a.createElement(_,{label:"Firefox-only Failures",failsIn:["firefox"],passesIn:["safari","chrome"],runs:this.state.wptRuns,paths:Array.from(this.state.selectedPaths)},r.a.createElement("h2",null,"Firefox-only Failures"),r.a.createElement("p",null,"Tests that pass in Chrome and Safari but fail in Firefox.")),r.a.createElement(_,{label:"All Firefox Failures",failsIn:["firefox"],passesIn:[],runs:this.state.wptRuns,paths:Array.from(this.state.selectedPaths)},r.a.createElement("h2",null,"All Firefox Failures"),r.a.createElement("p",null,"Tests that fail in Firefox")),r.a.createElement(N,{label:"Gecko Data",data:this.filterGeckoMetadata(),paths:Array.from(this.state.selectedPaths)},r.a.createElement("h2",null,"Gecko metadata"),r.a.createElement("p",null,"Gecko metadata in ",r.a.createElement("code",null,"testing/web-platform/meta"))))))}}]),t}(n.Component),C=function(e){function t(){return Object(p.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){if(!this.props.runs)return null;var e=this.props.runs[0].revision,t=O("",{sha:this.props.runs[0].full_revision_hash});return r.a.createElement("dl",null,r.a.createElement("dt",null,"wpt SHA1:"),r.a.createElement("dd",null,r.a.createElement("a",{href:t},e)))}}]),t}(n.Component),S=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){a.props.onComponentChange(e.target.value)},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.components.map(function(e){return r.a.createElement("option",{value:e.toLowerCase(),key:e.toLowerCase()},e)});return this.props.value?r.a.createElement("section",null,r.a.createElement("label",null,"Bug Component: "),r.a.createElement("select",{onChange:this.handleChange,value:this.props.value},e)):null}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onCheckboxChange=function(e,t){var n=new Set(a.state.paths);t?n.add(e):n.delete(e),a.setState({paths:n})},a.onUpdateClick=function(){a.props.onChange(a.state.paths)},a.state={paths:new Set(a.props.paths)},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e){e.selectedPaths!==this.props.selectedPaths&&this.setState({paths:new Set(this.props.selectedPaths)})}},{key:"render",value:function(){var e=this;if(!this.props.paths)return null;var t=this.props.paths.sort().map(function(t){return r.a.createElement("li",{key:t},r.a.createElement(P,{checked:e.props.selectedPaths.has(t),value:t,onCheckboxChange:e.onCheckboxChange}),t)});return r.a.createElement("section",null,r.a.createElement("h2",null,"Test Paths"),r.a.createElement("button",{onClick:this.onUpdateClick,disabled:w(this.state.paths,this.props.selectedPaths)},"Update"),r.a.createElement("ul",{id:"test-paths"},t))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState({checked:!!e.target.checked}),a.props.onCheckboxChange(a.props.value,e.target.checked)},a.state={checked:a.props.checked},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("input",{name:this.props.path,type:"checkbox",checked:this.state.checked,onChange:this.handleChange})}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={loaded:!1,results:[]},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"buildQuery",value:function(){var e={run_ids:this.props.runs.map(function(e){return e.id}),query:{and:[]}},t=e.query.and,a=!0,n=!1,r=void 0;try{for(var s,l=this.props.failsIn[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var o=s.value,c=!0,u=!1,i=void 0;try{for(var p,h=k[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var f=p.value;t.push({not:{browser_name:o,status:f}})}}catch(P){u=!0,i=P}finally{try{c||null==h.return||h.return()}finally{if(u)throw i}}}}catch(P){n=!0,r=P}finally{try{a||null==l.return||l.return()}finally{if(n)throw r}}var d=!0,m=!1,v=void 0;try{for(var b,y=this.props.passesIn[Symbol.iterator]();!(d=(b=y.next()).done);d=!0){var g=b.value,j=void 0;if(k.size>1){var w={or:[]};t.push(w),j=w.or}else j=t;var O=!0,E=!1,x=void 0;try{for(var C,S=k[Symbol.iterator]();!(O=(C=S.next()).done);O=!0){var A=C.value;j.push({browser_name:g,status:A})}}catch(P){E=!0,x=P}finally{try{O||null==S.return||S.return()}finally{if(E)throw x}}}}catch(P){m=!0,v=P}finally{try{d||null==y.return||y.return()}finally{if(m)throw v}}return this.props.paths.length>1?t.push({or:this.props.paths.map(function(e){return{pattern:e}})}):t.push({pattern:this.props.paths[0]}),e}},{key:"fetchResults",value:function(){var e=Object(o.a)(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.buildQuery(),e.next=3,fetch(O("api/search",{}),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(!this.props.runs||!this.state.loaded)return r.a.createElement("div",null,this.props.children,r.a.createElement("p",null,"Loading\u2026"));if(null===this.state.results.results)return r.a.createElement("div",null,this.props.children,r.a.createElement("p",null,"Load failed"));if(!this.state.results.results.length)return r.a.createElement("div",null,this.props.children,r.a.createElement("p",null,"No results"));var t=this.state.results.results.map(function(t){return r.a.createElement(M,{failsIn:e.props.failsIn,passesIn:e.props.passesIn,runs:e.props.runs,result:t,key:t.test})});return t.sort(function(e,t){return e.key>t.key?1:e.key===t.key?0:-1}),r.a.createElement("div",null,this.props.children,r.a.createElement("p",null,this.state.results.results.length," top-level tests with \xa0",this.state.results.results.map(function(e){return e.legacy_status[0].total}).reduce(function(e,t){return e+t},0)," subtests"),r.a.createElement("ul",null,t))}},{key:"componentDidMount",value:function(){var e=Object(o.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchIfPossible({});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(o.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchIfPossible(t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchIfPossible",value:function(){var e=Object(o.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.props.runs){e.next=2;break}return e.abrupt("return");case 2:if(this.props.paths){e.next=4;break}return e.abrupt("return");case 4:if(!(this.state.loaded&&j(this.props.paths,t.paths)&&j(this.props.failsIn,t.failsIn)&&j(this.props.passesIn,t.passesIn))){e.next=6;break}return e.abrupt("return");case 6:if(this.props.paths.length){e.next=9;break}return this.setState({results:{results:[]},loaded:!0}),e.abrupt("return");case 9:return e.next=11,this.fetchResults();case 11:a=e.sent,this.setState({results:a,loaded:!0});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}(n.Component),M=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(){a.setState({showDetails:!a.state.showDetails})},a.state={showDetails:!1},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e="http://w3c-test.org".concat(this.props.result.test),t=O("results/".concat(this.props.result.test)),a="http://searchfox.org/mozilla-central/source/testing/web-platform/meta".concat(this.props.result.test,".ini");return r.a.createElement("li",{className:"tree-row"+(this.state.showDetails?" tree-row-expanded":"")},r.a.createElement("span",{onClick:this.handleClick},this.state.showDetails?"\u25bc":"\u25b6",r.a.createElement("code",null,this.props.result.test)),"[",r.a.createElement("a",{href:e},"test"),"] [",r.a.createElement("a",{href:t},this.props.result.legacy_status[0].total," subtests"),"] [",r.a.createElement("a",{href:a},"gecko metadata"),"]",this.state.showDetails?r.a.createElement("div",{className:"tree-row"},r.a.createElement(I,{runs:this.props.runs,visible:this.state.showDetails,test:this.props.result.test,passesIn:this.props.passesIn,failsIn:this.props.failsIn})):"")}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={loaded:!1,results:null},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"processResultData",value:function(e){var t=this,a=new Map,n=!0,r=!1,s=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var c=l.value,u=Object(f.a)(c,2),i=u[0],p=u[1];a.has(null)||a.set(null,new Map),a.get(null).set(i,{status:p.status,message:p.message});var h=!0,d=!1,m=void 0;try{for(var v,b=p.subtests[Symbol.iterator]();!(h=(v=b.next()).done);h=!0){var y=v.value;a.has(y.name)||a.set(y.name,new Map),a.get(y.name).set(i,{status:y.status,message:y.message})}}catch(G){d=!0,m=G}finally{try{h||null==b.return||b.return()}finally{if(d)throw m}}}}catch(G){r=!0,s=G}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}var g=!0,j=!1,w=void 0;try{for(var O,E=a.values()[Symbol.iterator]();!(g=(O=E.next()).done);g=!0){var x=O.value,C=!0,S=!1,A=void 0;try{for(var P,_=e.keys()[Symbol.iterator]();!(C=(P=_.next()).done);C=!0){var M=P.value;x.has(M)||x.set(M,{status:"MISSING",message:null})}}catch(G){S=!0,A=G}finally{try{C||null==_.return||_.return()}finally{if(S)throw A}}}}catch(G){j=!0,w=G}finally{try{g||null==E.return||E.return()}finally{if(j)throw w}}var I=new Map,D=!0,R=!1,N=void 0;try{for(var B,L=function(){var e=B.value,a=(z=Object(f.a)(e,2))[0],n=z[1];t.props.passesIn.every(function(e){return k.has(n.get(e).status)})&&t.props.failsIn.every(function(e){return!k.has(n.get(e).status)})&&I.set(a,n)},T=a[Symbol.iterator]();!(D=(B=T.next()).done);D=!0){var z;L()}}catch(G){R=!0,N=G}finally{try{D||null==T.return||T.return()}finally{if(R)throw N}}var F=[];return I.has(null)&&(F.push([null,I.get(null)]),I.delete(null)),F.concat(Array.from(I))}},{key:"componentDidMount",value:function(){var e=Object(o.a)(m.a.mark(function e(){var t,a,n,r,s,l,o,c,u,i,p,h,d,v,b,y,k,g,j,w,O;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=new Map,a=!0,n=!1,r=void 0,e.prev=4,s=this.props.runs[Symbol.iterator]();!(a=(l=s.next()).done);a=!0)o=l.value,c=o.browser_name,u=o.results_url,(i=u.split("-")).pop(),p="".concat(i.join("-")).concat(this.props.test),t.set(c,fetch(p).then(function(e){return e.json()}));e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),n=!0,r=e.t0;case 12:e.prev=12,e.prev=13,a||null==s.return||s.return();case 15:if(e.prev=15,!n){e.next=18;break}throw r;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return e.next=22,Promise.all(Array.from(t.values()));case 22:h=!0,d=!1,v=void 0,e.prev=25,b=t[Symbol.iterator]();case 27:if(h=(y=b.next()).done){e.next=41;break}return k=y.value,g=Object(f.a)(k,2),j=g[0],w=g[1],e.t1=t,e.t2=j,e.next=36,w;case 36:e.t3=e.sent,e.t1.set.call(e.t1,e.t2,e.t3);case 38:h=!0,e.next=27;break;case 41:e.next=47;break;case 43:e.prev=43,e.t4=e.catch(25),d=!0,v=e.t4;case 47:e.prev=47,e.prev=48,h||null==b.return||b.return();case 50:if(e.prev=50,!d){e.next=53;break}throw v;case 53:return e.finish(50);case 54:return e.finish(47);case 55:O=this.processResultData(t),this.setState({results:O,loaded:!0});case 57:case"end":return e.stop()}},e,this,[[4,8,12,20],[13,,15,19],[25,43,47,55],[48,,50,54]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(!this.props.visible)return null;if(!this.state.loaded)return r.a.createElement("p",null,"Loading");var t=this.props.runs.map(function(e){return r.a.createElement("th",{key:e.browser_name},e.browser_name)}),a=this.state.results.map(function(t){var a=Object(f.a)(t,2),n=a[0],s=a[1];return r.a.createElement(D,{key:n,runs:e.props.runs,subtest:n,results:s})});return r.a.createElement("table",{className:"results"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),t)),r.a.createElement("tbody",null,a))}}]),t}(n.Component),D=function(e){function t(){return Object(p.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.runs.map(function(t){var a=e.props.results.get(t.browser_name);return r.a.createElement(R,{result:a,key:t.browser_name})});return r.a.createElement("tr",null,r.a.createElement("th",null,this.props.subtest?this.props.subtest:"<parent>"),t)}}]),t}(n.Component),R=function(e){function t(){return Object(p.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("td",{className:"result result-".concat(this.props.result.status.toLowerCase()),title:this.props.result.message},this.props.result.status)}}]),t}(n.Component),N=function(e){function t(){return Object(p.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"groupData",value:function(){for(var e=new Map,t=new Map,a=new Map,n=Object.entries(this.props.data),r=0;r<n.length;r++){var s=n[r],l=Object(f.a)(s,2),o=l[0],c=l[1];if(c.disabled&&e.set(o,c.disabled),c["lsan-allowed"]&&t.set(o,c.lsanAllowed),c.expected_CRASH&&a.set(o,c.expected_CRASH.map(function(e){return[e,null]})),c._tests)for(var u=Object.entries(c._tests),i=0;i<u.length;i++){var p=u[i],h=Object(f.a)(p,2),d=h[0],m=h[1],v="".concat(o,"/").concat(d);if(m.disabled&&e.set(v,m.disabled),m.expected_CRASH&&a.set(v,m.expected_CRASH.map(function(e){return[e,null]})),m._subtests)for(var b=Object.entries(m._subtests),y=0;y<b.length;y++){var k=b[y],g=Object(f.a)(k,2),j=g[0],w=g[1],O="".concat(o,"/").concat(d," | ").concat(j);w.disabled&&e.set(O,w.disabled),w.expected_CRASH&&a.set(O,w.expected_CRASH.map(function(e){return[e,null]}))}}}return{disabled:e,lsan:t,crashes:a}}},{key:"render",value:function(){var e;if(console.log(this.props.data),null!==this.props.data){e=[];var t=this.groupData();if(console.log(t),t.crashes){var a=[],n=!0,s=!1,l=void 0;try{for(var o,c=t.crashes[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var u=o.value,i=Object(f.a)(u,2),p=i[0],h=i[1];a.push(r.a.createElement(B,{key:p,test:p,values:h,render:function(e){return null}}))}}catch(R){s=!0,l=R}finally{try{n||null==c.return||c.return()}finally{if(s)throw l}}a.length&&e.push(r.a.createElement("section",{key:"crashes"},r.a.createElement("h2",null,"Crashes"),r.a.createElement("p",null,a.length," tests crash in some configurations"),r.a.createElement("ul",null,a)))}if(t.disabled){var d=[],m=!0,v=!1,b=void 0;try{for(var y,k=t.disabled[Symbol.iterator]();!(m=(y=k.next()).done);m=!0){var g=y.value,j=Object(f.a)(g,2),w=j[0],O=j[1];d.push(r.a.createElement(B,{key:w,test:w,values:O,render:function(e){return r.a.createElement(L,{value:e})}}))}}catch(R){v=!0,b=R}finally{try{m||null==k.return||k.return()}finally{if(v)throw b}}d.length&&e.push(r.a.createElement("section",{key:"disabled"},r.a.createElement("h2",null,"Disabled"),r.a.createElement("p",null,d.length," tests are disabled in some configurations"),r.a.createElement("ul",null,d)))}if(t.lsan){var E=[],x=!0,C=!1,S=void 0;try{for(var A,P=t.lsan[Symbol.iterator]();!(x=(A=P.next()).done);x=!0){var _=A.value,M=Object(f.a)(_,2),I=M[0],D=M[1];E.push(r.a.createElement(B,{key:I,test:I,values:D,render:function(e){return r.a.createElement(T,{value:e})}}))}}catch(R){C=!0,S=R}finally{try{x||null==P.return||P.return()}finally{if(C)throw S}}E.length&&e.push(r.a.createElement("section",{key:"lsan"},r.a.createElement("h2",null,"LSAN Failures"),r.a.createElement("p",null,E.length," directories have LSAN failures"),r.a.createElement("ul",null,E)))}return r.a.createElement("section",null,this.props.children,e.length?e:r.a.createElement("p",null,"No metadata available"))}return e=r.a.createElement("p",null,"Loading"),r.a.createElement("section",null,r.a.createElement("h2",null,"Gecko metadata"),r.a.createElement("p",null,"None"))}}]),t}(n.Component),B=function(e){function t(){return Object(p.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var s,l=this.props.values[Symbol.iterator]();!(t=(s=l.next()).done);t=!0){var o=s.value,c=Object(f.a)(o,2),u=c[0],i=c[1],p=u?"if ".concat(u).concat(i?": ":" "):"";e.push(r.a.createElement("li",{key:u||"None",className:"tree-row"},p,i?this.props.render(i):null))}}catch(d){a=!0,n=d}finally{try{t||null==l.return||l.return()}finally{if(a)throw n}}var h=null;return e.length&&(h=r.a.createElement("ul",{className:"tree-row"},e)),r.a.createElement("li",{key:this.props.test},this.props.test,h)}}]),t}(n.Component),L=function(e){function t(){return Object(p.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){for(var e=[/https?:\/\/bugzilla\.mozilla\.org\/show_bug\.cgi\?id=(\d+)/,/(?:bug\s+)?(\d+)/i],t=0;t<e.length;t++){var a=e[t].exec(this.props.value);if(null!==a)return r.a.createElement("a",{href:"https://bugzilla.mozilla.org/show_bug.cgi?id=".concat(a[1])},"Bug ",a[1])}return this.props.value}}]),t}(n.Component),T=function(e){function t(){return Object(p.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){if(Array.isArray(this.props.value)){var e=this.props.value.map(function(e){return r.a.createElement("li",{key:e},"x")});return r.a.createElement("ul",null,e)}return this.props.value}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClickTab=function(e){a.setState({activeTab:e}),E.set("tab",e)},a.state={activeTab:E.get("tab")||a.props.children[0].props.label},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.children.map(function(t){var a=t.props.label;return r.a.createElement(F,{active:e.state.activeTab===a,label:a,key:a,onClick:e.handleClickTab})}),a=this.props.children.find(function(t){return t.props.label===e.state.activeTab});return r.a.createElement("div",{className:"tab-view"},r.a.createElement("ol",{className:"tab-strip"},t),r.a.createElement("div",{className:"tab-content"},a))}}]),t}(n.Component),F=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(){a.props.onClick(a.props.label)},a}return Object(i.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("li",{className:"tab-label "+(this.props.active?"tab-active":""),onClick:this.onClick},this.props.label)}}]),t}(n.Component),G=x;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,2,1]]]);
//# sourceMappingURL=main.a5b10b0d.chunk.js.map